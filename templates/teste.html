{% extends 'base.html' %}
{% load static %}

{% block scripts %}
<script>
    $('#btnPesquisa').click(function(){
      let pesquisa = $('#query').val()
      if(pesquisa.length >=2){
        $.ajax({
          type: 'GET',
          url: '{% url "pesquisar_endereco_ip" %}',
          data: {
            'query': pesquisa,
          },
          success: function(data){
            $('#listaItems').html('');
            for(let item in data){
              $('#listaItems').append(data[item])
            }
          },
          error: function(request, status, error){
            alert('Deu merda!')
          }
        });
      }
    });
</script>
{% endblock scripts %}

{% block corpo %}
<style>
  body {
        background-color:rgb(235, 232, 232);
        border-style:none;
        background-image:  linear-gradient(#bdc3c7, #a6aeb4);
        
    }
</style>


<main id='primeiro'>
  <div class="container pb-3 p-lg-5 pt-5 bg-dark text-light mb-4 rounded">
    <div class="row">
      <div class="col-12 col-lg-4 pb-2 pb-lg-0">
        <h5 class='text-muted'>Filtrar por Rede</h5>
        <ul class="list-group">
          <li class="list-group-item bg-dark text-muted">
            <div class="form-check">
              <input type="checkbox" class="form-check-input" id='rede4'>
              <label for="rede4" class='form-check-label'>Endereços IP da Rede 4</label>
            </div>
          </li>
          <li class="list-group-item bg-dark text-muted">
            <div class="form-check">
              <input type="checkbox" class="form-check-input" id='rede5'>
              <label for="rede5" class='form-check-label'>Endereços IP da Rede 5</label>
            </div>
          </li>
          <li class="list-group-item bg-dark text-muted">
            <div class="form-check">
              <input type="checkbox" class="form-check-input" id='rede15'>
              <label for="rede15" class='form-check-label'>Endereços IP da Rede 15</label>
            </div>
          </li>
        </ul>
      </div>
      <div class="col-12 col-lg-8">
        <div class="input-group">
          <input type="text" class="form-control rounded border-secondary bg-dark text-light" placeholder="Pesquisar" id='query' autocomplete="off">
          <button class="btn btn-outline-primary" id='btnPesquisa'>Pesquisar</button>
        </div>
        <div class="col-12 mt-3">
          <div class="col-12 overflow-auto" style='max-height: 60vh; min-height: 30vh;'>
            <ul class="list-group" id='listaItems'>
              {% for item in enderecos %}
              {{item|safe}}
              {% endfor %}
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
{% endblock corpo %}